USE master
GO

IF DB_ID('Work') IS NULL
CREATE DATABASE Work
GO

USE Work;


IF OBJECT_ID('dbo.Employees','U') IS NOT NULL
	DROP TABLE dbo.Employees 
	
IF OBJECT_ID('dbo.Branches','U') IS NOT NULL
	DROP TABLE dbo.Branches

IF OBJECT_ID('dbo.Positions','U') IS NOT NULL
	DROP TABLE dbo.Positions 
GO

CREATE TABLE dbo.Branches (
	id INT  CONSTRAINT pk_bra PRIMARY KEY,
	name VARCHAR(20),
	address VARCHAR(20) )

CREATE TABLE dbo.Positions (
	position VARCHAR(20) CONSTRAINT pk_pos PRIMARY KEY,
	salary_min MONEY,
	salary_max MONEY)

CREATE TABLE dbo.Employees (
    id INT CONSTRAINT pk_emp PRIMARY KEY,
	last_name VARCHAR(15),
	position VARCHAR(20) CONSTRAINT fk_pos REFERENCES dbo.Positions(position),
	manager INT CONSTRAINT fk_id_man REFERENCES dbo.Employees(id),
	hired DATE,
	salary_base MONEY CONSTRAINT salary_base CHECK(salary_base>100),
	salary_additional MONEY,
	id_bra INT CONSTRAINT fk_id_bra REFERENCES dbo.Branches(id))
GO

INSERT INTO dbo.Branches VALUES (10,'POZNAN','Kwiatowa 3');
INSERT INTO dbo.Branches VALUES (20,'WARSAW','al. Jerozolimskie 22');
INSERT INTO dbo.Branches VALUES (30,'CRACOW','Planty 14');
INSERT INTO dbo.Branches VALUES (40,'WROCLAW','Nad Odra 16');
INSERT INTO dbo.Branches VALUES (50,'GDANSK', 'Portowa 30');
GO

INSERT INTO dbo.Positions VALUES ('MANAGER',3800.00,5500.00);
INSERT INTO dbo.Positions VALUES ('FOREMAN',2510.00, 3750.00);
INSERT INTO dbo.Positions VALUES ('FITTER',1300.00, 2500.00);
INSERT INTO dbo.Positions VALUES ('TRAINEE',1150.00, 1250.00);
INSERT INTO dbo.Positions VALUES ('SECRETARY',1270.00, 2050.00);
INSERT INTO dbo.Positions VALUES ('CHIEF',8100.00,9200.00);
GO
 
INSERT INTO dbo.Employees VALUES (100,'SUMINSKI'    ,'CHIEF'  ,NULL,'19680101',8130.00,420.50,10);
INSERT INTO dbo.Employees VALUES (110,'BARTCZAK'    ,'MANAGER'  ,100 ,'19730501',4350.00,210.00,40);
INSERT INTO dbo.Employees VALUES (120,'MALINOWSKI'  ,'MANAGER'  ,100 ,'19770901',4070.00,  NULL,30);
INSERT INTO dbo.Employees VALUES (130,'BRZEZINSKI'  ,'MANAGER'  ,100 ,'19680701', 4960.00,  NULL,20);
INSERT INTO dbo.Employees VALUES (140,'ZABLOCKI'    ,'FOREMAN'  ,130 ,'19750915', 4830.00,105.00,20);
INSERT INTO dbo.Employees VALUES (150,'LEWANDOWSKI' ,'FOREMAN'   ,130 ,'19770901', 2645.50,  NULL,20);
INSERT INTO dbo.Employees VALUES (160,'KOPROWSKI'   ,'FOREMAN'   ,130 ,'19850301', 2590.00,  NULL,20);
INSERT INTO dbo.Employees VALUES (170,'JEZIERSKI'   ,'FITTER'  ,130 ,'19921001', 1439.70, 80.50,20);
INSERT INTO dbo.Employees VALUES (190,'MALINIAK'    ,'FITTER'  ,140 ,'19930901', 1371.00,  NULL,20);
INSERT INTO dbo.Employees VALUES (180,'BOGULA'      ,'SECRETARY',100 ,'19850220', 1410.20,  NULL,10);
INSERT INTO dbo.Employees VALUES (200,'URBANIAK'    ,'TRAINEE'  ,140 ,'19940715', 908.00,  NULL,30);
INSERT INTO dbo.Employees VALUES (210,'CELINSKI'    ,'TRAINEE'  ,130 ,'19931015', 950.00,170.60,30);
INSERT INTO dbo.Employees VALUES (220,'KOWAL'       ,'FITTER'  ,110 ,'19930110', 1480.00,  NULL,20);
INSERT INTO dbo.Employees VALUES (230,'HANTCZAK'    ,'FITTER'  ,120 ,'19920901', 1480.00, 90.00,30);
GO 

--IF DB_ID('Work') IS NOT NULL
--DROP DATABASE Work
--GO

